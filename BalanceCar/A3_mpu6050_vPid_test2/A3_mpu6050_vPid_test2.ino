/*===================================================================
1.两轮平衡小车
2.MEGA2560
3.Serial  是log输出
4.Serial3 是RC遥控命令输入输出
5.
//=================================================================*/
//===================================================================
#include "Timer.h"//时间操作系统头文件 
Timer t;
float timeChange = 20;//ms滤波法采样时间间隔毫秒
int loopMS = 20;//50ms小车控制间隔
//===================================================================
//===================================================================
void setup() {
  //------------------------------------------------
  lgsetup("BalanceCar A3 ..."); rc_setup();
  //------------------------------------------------
  Car_Init(); //Car_Speed_Start(loopMS, 20);
  PID_Init(); //PID_Test(0.6, 20);
  MPU6050_setup();
  //------------------------------------------------
  int tickEvent1 = t.every(timeChange, MPU6050_loop);
  int tickEvent5 = t.every(loopMS, Car_loop);//50ms
  //------------------------------------------------
  //int tickEvent2 = t.every(50, MPU6050_show);
  //int tickEvent9 = t.every(500, rc_info_send);
  //------------------------------------------------
}
void loop() {
  //---------------------------------
  t.update();
  lgFeed();rcFeed();
  //---------------------------------
}
