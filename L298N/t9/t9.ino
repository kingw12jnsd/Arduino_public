float cm = 0;

void setup() {
  //-----------------------------
  Log_setup();
  Serial1.begin(9600);
  //-----------------------------
  PingSetup();
  IR_Setup(53,51,49);
  //BKMOTO(4,5,6,7,8,9);
  BKMOTO(22,24,26,28,30,32);
  Code_setIn();//车轮码盘中断
  //-----------------------------
  lg("$JML,CAR,SAN,0,0,0,0,0,0;");
  //-----------------------------
}

void loop() {
  //-----------------------
  SerialRead();
  //PingLoop();
  IR_Loop();
  IR_Show(false);
  //-----------------------------
  //cm = PingGetCM();
  cm = IR_Get();
  Serial.println(cm);
  //-----------------------------
  CmdLoop(cm);
  //-----------------------  
}

void SerialRead()
{
  //-------------------------------------------------------------------------
  while (Serial1.available()>0)
  {
    CmdExp(Serial1.read());    
  }
  //-------------------------------------------------------------------------
}

