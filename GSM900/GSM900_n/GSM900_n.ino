#include <Time.h> 
#include <SoftwareSerial.h>
#include <LCD5110_Graph.h>
#include <TinyGPS++.h>
//-------------------------------------------------------------------------
//LCD5110 myGLCD(3,4,5,6,7);
//extern uint8_t SmallFont[];
//-------------------------------------------------------------------------
TinyGPSPlus gps;
SoftwareSerial	GpsSerial(10, 13); // RX, TX
//-------------------------------------------------------------------------
SoftwareSerial	GsmSerial(11,12);
//-------------------------------------------------------------------------
char URL[130];
char UseH[] = "http://www.boboking.com/v/g.php?n=boboking&p=123xjp&g=";
//-------------------------------------------------------------------------

void setup() 
{
  //-------------------------------------------------------------------------
  //myGLCD.InitLCD(50);  BBKLCDShow();    delay(500); 
  //-------------------------------------------------------------------------
  Serial.begin(115200);
  GpsSerial.begin(4800);    delay(500); 
  GsmSerial.begin(9600);    delay(500); 
  //-------------------------------------------------------------------------
  //SubmitHttpInt();
  //-------------------------------------------------------------------------
}

//-------------------------------------------------------------------------
void loop() 
{
  //-------------------------------------------------------------------------
  feedgps();
  GPSloop();
  //GSMloop();
  //-------------------------------------------------------------------------
}

//-------------------------------------------------------------------------
unsigned long NoowTime = 0;
unsigned long ShowTime = 0;
int ShowTimeKey = 800;//5s
//-------------------------------------------------------------------------
void GPSloop() 
{
  //-------------------------------------------------------------------------
  NoowTime = millis();
  //-------------------------------------------------------------------------
  if( NoowTime - ShowTime > ShowTimeKey){ 
    //-------------------------------------------------------------------------
    ShowTime = NoowTime;
    GpsValueRun();
    //GpsStringRun();
    //GpsLCDShow();
    //-------------------------------------------------------------------------
    //GpsInfoShow();
    //GpsUrlStringShow();
    //-------------------------------------------------------------------------
  }
  //-------------------------------------------------------------------------
}


//-------------------------------------------------------------------------
unsigned long GsmNoowTime = millis();
unsigned long GsmShowTime = millis();
int GsmShowTimeKey = 30000;//5s
//-------------------------------------------------------------------------
void GSMloop() 
{
  //-------------------------------------------------------------------------
  GsmNoowTime = millis();
  if( GsmNoowTime - GsmShowTime > GsmShowTimeKey){ 
    //-------------------------------------------------------------------------
    GsmShowTime = GsmNoowTime;
    //SubmitHttpRequest(10);
    //-------------------------------------------------------------------------
  }
  //-------------------------------------------------------------------------
}

