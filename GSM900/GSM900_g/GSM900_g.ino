#include <Time.h> 
#include <SoftwareSerial.h>
#include <LCD5110_Graph.h>
#include <TinyGPS++.h>
//-------------------------------------------------------------------------
LCD5110 myGLCD(3,4,5,6,7);
extern uint8_t SmallFont[];
//-------------------------------------------------------------------------
TinyGPSPlus gps;
SoftwareSerial	GpsSerial(10, 13); // RX, TX
SoftwareSerial	GsmSerial(11,12);
time_t mytime = 0; 
//-------------------------------------------------------------------------
//String myurl ="http://www.boboking.com/v/g.php?n=boboking&p=123xjp&g=38,112,50,46,80,99,1245678900000";
//char myurl[] ="http://www.boboking.com/v/g.php?n=boboking&p=123xjp&g=38,112,50,46,80,99,1245678900000";
//void setTime(int hr,int min,int sec,int day, int month, int yr);

void setup() 
{
  //-------------------------------------------------------------------------
  myGLCD.InitLCD(50);
  BBKLCDShow();  delay(1000); 
  UpdLCDShow();  delay(1000); 
  //-------------------------------------------------------------------------
  Serial.begin(115200);
  GpsSerial.begin(4800);
  GsmSerial.begin(9600);
  delay(1000); 
  //-------------------------------------------------------------------------
  SubmitHttpInt();
  //-------------------------------------------------------------------------
}
//-------------------------------------------------------------------------
unsigned long NoowTime = 0;
unsigned long ShowTime = 0;
int ShowTimeKey = 800;//5s
//-------------------------------------------------------------------------
unsigned long GsmNoowTime = millis();
unsigned long GsmShowTime = millis();
int GsmShowTimeKey = 30000;//5s
//-------------------------------------------------------------------------
void loop() 
{
  //-------------------------------------------------------------------------
  NoowTime = millis();
  //-------------------------------------------------------------------------
  feedgps();
  //-------------------------------------------------------------------------
  if( NoowTime - ShowTime > ShowTimeKey){ 
    ShowTime = NoowTime;
    //-------------------------------------------------------------------------
    GpsValueRun();
    GpsLCDShow();
    SerialShow();    
    //-------------------------------------------------------------------------
    GpsTimeSet();
    Serial.println(mytime);
    //-------------------------------------------------------------------------
  }
  //-------------------------------------------------------------------------
  //GsmNoowTime = millis();
  //if( GsmNoowTime - GsmShowTime > GsmShowTimeKey){ 
    //GsmShowTime = GsmNoowTime;
    //-------------------------------------------------------------------------
    //SubmitHttpRequest(myurl,10);
    //-------------------------------------------------------------------------
  //}
  //-------------------------------------------------------------------------
}
